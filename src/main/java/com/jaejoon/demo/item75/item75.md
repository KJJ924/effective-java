# 예외의 상세 메시지에 실패 관련 정보를 담으라



예외가 발생하여 프로그램이 실패하였을때 프로그래머는 스텍 트레이스 정보를 확인하여 오류를 찾아서 버그를 해결 하고자 한다.

만약 예외 메세지가 상세한 정보를 담지않고 있다면? 프로그래머는 예외가 발생하는 환경을 재현하지 못하여 버그를 못 고칠수도 있다.

따라서 **실패 순간을 정확히 포착하기위해선 발생한 예외에 관여된 모든 매개변수와 필드의 값을 실패 메세지에 담아야 한다.**



예시를 살펴보자.



## 잘못된 예외 메세지

```java
public static void main(String[] args) {
    Member member = Member.create("kjj", "재준", 99);
}
```

누군가 만든 `Member.create()` 호출하여 새로운 회원을 생성하고자 했을때 

![image-20210717003341868](https://tva1.sinaimg.cn/large/008i3skNgy1gsj7oyjmhqj30ho01w3yr.jpg)

만약 다음과 같은  메세지를 만나게 된다면 해당 메서드를 사용한 클라이언트는 왜 오류가나는지 전혀 알수없다.

결국에는 소스코드를 타고들어가서 예외를 발생시키는 원인을 분석하게된다.

이러한 행동은 결국 나의 리소스를 낭비하게 됩니다.



## 잘 설계된 예외 메세지

```java
public static void main(String[] args) {
    Member member = Member.create("kjj", "재준", 99);
}
```

`Member.create()` 을 호출했을때 예외가 발생한다면

![image-20210717004440036](https://tva1.sinaimg.cn/large/008i3skNgy1gsj808hmdtj30ue02rgm9.jpg)

이처럼 **메세지, 대상필드, 입력값** 등을 포함하여 예외를 발생시킨다면 다음과 같은 장점이 존재합니다.

1. 왜 예외가 발생하는지 코드를 살펴보지 않아도 알 수 있음
2. 비지니스 로직 파악이 쉬움(객체의 불변식을 한눈에 볼 수 있음)



## 결론

실패 순간을 정확히 포착하기위해선 발생한 예외에 관여된 **모든 매개변수와 필드의 값을 실패 메세지에 담아야 한다**.